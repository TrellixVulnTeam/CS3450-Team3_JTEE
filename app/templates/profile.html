{% extends "base.html" %}
{% block content %}

<!-- Profile Information -->
  <!-- need to figure out how to align the center div with the sidebars -->
  <div style = "  position: relative;
                  top: 0;
                  right: 0;
                  bottom: 0;
                  left: 0;
                  width: 100%;
                  height: 30%;
                  background-color: #EBF4FA;
                  border-radius: 3px;">
    <img src = "https://x1.xingassets.com/assets/frontend_minified/img/users/nobody_m.original.jpg" class = "img-rounded" alt="Profile Picture" style = "width:15%; height: 80%;border-radius: 50%;">
    <!-- Username div -->
    <div style = "position: absolute;
                  top: 10%;
                  left: 25%;
                  width: 30%;
                  height: 15%;
                  border-radius: 3px;">
      <strong><font size = "6">{{first_name}} {{last_name}}</font></strong>
      <p><b>Email: </b>{{email}}</p>
      <p><b>User Name: </b>{{username}}</p>
    </div>
    <!-- Number of posts div -->
    <div style = "position: absolute;
                  top: 50%;
                  left: 20%;
                  width: 10%;
                  height: 15%;
                  border-radius: 3px;">
      <strong><font size = "6"; color = "#D05050">{{postsCount}}</strong></font><font size = "6"> Posts</font>
    </div>
    <!-- Friends div -->
    <div style = "position: absolute;
                  top: 50%;
                  left: 50%;
                  width: 10%;
                  height: 15%;
                  border-radius: 3px;">
      <strong><a href="friendsList"><font size = "6">{{friendCount}}</strong></font><font size = "6"></a> Friends</font>
    </div>
    <!-- Edit Profile Button -->
    {% if currentUser == True %}
    <div style = "position: absolute;
                  margin-right: 225px;
                  top: 5%;
                  right: 5%;
                  width: 15%;
                  height: 20%;
                  border-radius: 3px;">
      <button type="button" class="btn btn-primary" id="edit-profile-btn">Edit Profile</button>
    </div>
    <!-- Edit Profile Button -->
    <div style = "position: absolute;
                  margin-right: 225px;
                  top: 20%;
                  right: 5%;
                  width: 15%;
                  height: 20%;
                  border-radius: 3px;">
      <a href="logout" class="btn btn-info" role="button">Logout</a>
    </div>

    <!-- Modal -->
      <div class="modal fade" id="editModal" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 style="color:#286090;"><span class="glyphicon glyphicon-lock"></span> Edit Profile</h4>
            </div>
            <div class="modal-body" id="editProfile">
              <form role="form" action="editProfile" method="POST">
                <div class="form-group">
                  <label for="username"><span class="glyphicon glyphicon-user edit-form-btn"></span> Username</label>
                  <input name="username" type="text" class="form-control" id="edit-username" placeholder="Enter Username" value="{{username}}" required>
                </div>
                <div class="form-group">
                  <label for="email"><span class="glyphicon glyphicon-envelope edit-form-btn"></span> Email</label>
                  <input name="email" type="text" class="form-control" id="edit-email" placeholder="Enter Email" value="{{email}}" required>
                </div>
                <div class="form-group">
                  <label for="f-name"> First Name</label>
                  <input name="first_name" type="text" class="form-control" id="edit-firstname" placeholder="Enter First Name" value="{{first_name}}" required>
                </div>
                <div class="form-group">
                  <label for="l-name"> Last Name</label>
                  <input name="last_name" type="text" class="form-control" id="edit-lastname" placeholder="Enter Last Name" value="{{last_name}}" required>
                </div>
                <div class="form-group">
                  <label for="pass"><span class="glyphicon glyphicon-ok-sign edit-form-btn"></span> Password</label>
                  <input name="user_password" type="text" input-type="hidden" class="form-control" id="edit-pass" placeholder="Enter Password" value="{{user_password}}" required>
                </div>
                <!-- <div class="form-group">
                  <label for="c-pass"><span class="glyphicon glyphicon-ok-circle edit-form-btn"></span> Password Confirm</label>
                  <input name="user_password_confirm" type="password" class="form-control" id="edit-confirm-pass" placeholder="Confirm Password" value="{{user_password_confirm}}" oninput="check(this, 'pass2')" required>
                  <script language='javascript' type='text/javascript'>
                    function check(input, pass) {
                        // console.log("input: ", input.value);
                        // console.log("$('#edit-pass').val(): ", $('#edit-pass').val());
                        if (pass == 'pass1') {
                          if (input.value != $('#edit-confirm-pass').val()) {
                              input.setCustomValidity('Password Must be Matching.');
                          } else {
                              // input is valid -- reset the error message
                              input.setCustomValidity('');
                          }
                        } else {
                          if (input.value != $('#edit-pass').val()) {
                              input.setCustomValidity('Password Must be Matching.');
                          } else {
                              // input is valid -- reset the error message
                              input.setCustomValidity('');
                          }
                        }
                    }
                </script>
                </div> -->
                <button type="submit" value="Submit" class="btn btn-default btn-primary btn-block"><span class="glyphicon glyphicon-pencil"></span> Save Changes</button>
              </form>
              {% if error %}
              <h3>{{ error }}</h3>
              {% endif %}
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
              <button id="delete-profile-btn" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Delete This Account</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="deleteModal" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 style="color:#c9302c;"><span class="glyphicon glyphicon-exclamation-sign"></span> Delete Profile?</h4>
            </div>
            <div class="modal-body">
              <h3>Are you sure you would like to delete your profile?  This cannot be undone!</h3>
              <br />
              <form role="form">
                <div class="form-group">
                  <label for="profile-delete"><span class="glyphicon glyphicon-envelope warning-color"></span> Email</label>
                  <input type="text" class="form-control" id="delete-email" placeholder="Email of Profile to be Deleted" required>
                </div>
                <button type="submit" class="btn btn-default btn-primary btn-block btn-danger"><span class="glyphicon glyphicon-pencil"></span> DELETE PROFILE</button>
              </form>
            </div>
            <div class="modal-footer">
              <button type="submit" id="delete-cancel-btn" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
            </div>
          </div>
        </div>
      </div>

    {% endif %}
    {% if currentUser == False %}
    {% if isFriend == True %}
    <div style = "position: absolute;
                  margin-right: 225px;
                  top: 5%;
                  right: 5%;
                  width: 15%;
                  height: 20%;
                  border-radius: 3px;">
      <button type="button" class="btn btn-primary">Add Friend</button>
    {% endif %}
    {% if isFriend == False %}
    <div style = "position: absolute;
                  margin-right: 225px;
                  top: 5%;
                  right: 5%;
                  width: 15%;
                  height: 20%;
                  border-radius: 3px;">
      <button type="button" class="btn btn-primary">Remove Friend</button>
    {% endif %}
    {% endif %}
  </div>
  <!-- Posts div -->
  <div style = "  position: relative;
                  top: 0;
                  right: 0;
                  bottom: 0;
                  left: 0;
                  width: 100%;
                  height: 80%;
                  background-color: #EBF4FA;
                  border-radius: 3px;">
    <!-- Recent Posts -->
    <div style = "position: absolute;
                  top: 15%;
                  left: 5%;
                  width: 30%;
                  height: 70%;
                  background-color: #FFFFFF;
                  border-color: #3b3131;
                  border: solid #3B3131;
                  border-width: 2px;
                  border-radius: 3px;">
      {% for post in posts %}
      <div><p>{{posts}}</b></p></div>
      {% endfor %}
    </div>
    <!-- Write a post... -->
    {% if currentUser == True %}
    <div style = "position: absolute;
                  margin-right: 125px;
                  top: 10%;
                  right: 15%;
                  width: 30%;
                  height: 80%;
                  background-color: #FFFFFF;
                  border-color: #000000;
                  border: solid #000;
                  border-width: 2px;
                  border-radius: 3px;">

          <form action="\postCreate" method = "POST">
              Write a Post... <input type="text" placeholder="Write a Post" name = "post" value = "{{request.form.post}}"><br>
              <input type="submit" value="Submit">
          </form>
    </div>
    {% endif %}
  </div>

<script>
$(document).ready(function(){
    $("#edit-profile-btn").click(function(){
        $("#editModal").modal();
    });
    $("#delete-cancel-btn").click(function(){
        $("#editModal").modal();
    });
    $("#delete-profile-btn").click(function(){
        $("#deleteModal").modal();
    });
});
</script>
{% endblock %}
